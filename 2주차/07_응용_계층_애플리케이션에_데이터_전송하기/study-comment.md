# 28. 응용 계층의 역할

## 1. 응용 계층의 역할

- 웹 사이트를 볼 때는 **웹 브라우저**를 사용하고 메일을 보내고 받을 때는 Outlook 같은 **메일 프로그램**을 사용한다.
- 애플리케이션은 **서비스를 요청하는 측**에서 사용하는 애플리케이션으로 분류할 수 있다.
- 일반적으로 서비스를 요청하는 측을 **클라이언트,** 서비스를 제공하는 측은 **서버**
- 웹 브라우저나 메일 프로그램은 사용자 측에서 사용하는 애플리케이션이니 클라이언트가 된다.
- 반면 서비스를 제공하는 측인 서버에서는 웹 서버 프로그램과 메일 서버 프로그램 등이 있다.
- 그리고 이러한 애플리케이션은 **응용 계층**에서 동작한다.
- 애플리케이션이 동작하는 계층이라서 응용계층이다.
- 응용 계층은 5계층의 세션 계층과 6계층의 표현 계층을 포함한다.
- 응용 계층에서는 사용자측(클라이언트)의 요청을 전달하기 위해 통신 대상(서버 등)이 이해할 수 있는 메시지(데이터)로 변환하고 전송 계층으로 전달하는 역할을 한다.
- 클라이언트 측 애플리케이션(웹 브라우저, 메일 프로그램 등)이 서버 측 애플리케이션(웹 서버 프로그램, 메일 서버 프로그램 등)과 통신하려면 응용 계층의 프로토콜을 사용해야한다.

| 프로토콜 | 내용 |
| --- | --- |
| HTTP | 웹 사이트 접속 |
| DNS | 이름 해석 |
| FTP | 파일 전송 |
| SMTP | 메일 송신 |
| POP3 | 메일 수신 |
|  |  |
- 네트워크에서 컴퓨터나 네트워크 장비에 붙여진 이름을 기반으로 IP 주소를 알아내는 것을 이름해석이라고하는데, 이를 위해 DNS를 사용한다.

- 응용 계층은 각각의 애플리케이션에 대응되는 데이터를 전송하는 역할을 한다.
- 응용 계층에서 보내려는 데이터는 하위 계층인 전송 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층 순서로 처리된다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/5da8b6a6-938f-45b6-ad55-85a8533b040f/Untitled.png)

- OSI 모델의 계층에서 사용되는 프로토콜과 기술 그림

# 29. 웹 서버의 구조 (웹 사이트 접속)

## 1. WWW란?

- WWW는 HTML, URL, HTTP라는 세가지 기술이 사용된다.
- HTML은 웹 페이지에서 문장 구조나 문자를 꾸미는 태그를 사용하여 작성하는 마크업 언어다.
- 제목이나 목록과 같은 문장 구조를 지정하거나 이미지 파일을 보여 줄 때도 태그를 사용한다.

<aside>
💡 <html>

<body>

<h2>HTML</h2>

<p>안녕하세요</p>

<img src = “picture.jpg”>

</body>

</html>

</aside>

- 또한 HTML은 하이퍼텍스트를 작성하는 마크업 언어라고도 한다.
- 하이퍼텍스트로는 문자와 이미지를 표시하거나 하이퍼링크를 사용할 수 있다.
- 하이퍼 링크는 보통 링크라고 부르는데 웹 사이트에서 아이콘이나 버튼 등에 있는 링크를 클릭하면 다른 사이트로 이동 할 수 있다.
- 이때 HTML 파일이나 이미지 파일이 웹 서버에서 전송되는데 문서와 이미지는 각각 별도로 요청한다.

## 2. HTTP란?

- 클라이언트(웹 브라우저)는 웹 사이트를 보기 위해 서버(웹 서버 프로그램)의 80번 포트를 사용하여  HTTP 통신을 한다.
- 클라이언트에서 HTTP 요청을 보내고 서버에서 HTTP 응답을 반환한다.
- 클라이언트가 데이터를 요청할 때는 “GET”이라고 하는 요청 정보, 파일 이름, 버전 등을 서버에 전송한다.
- 그럼 서버는 응답으로 요청을 정상적으로 처리했다는 “OK”라는 정보를 반환하고 index.html을 클라이언트에게 보낸다.
- 지금은 HTTP/2나 HTTP/1.1 버전을 사용하지만 예전 HTTP/1.0 버전에서는 요청을 보낼 때마다 연결 했다 끊는 작업을 반복해서 웹 페이지가 느리게 보였다.
- 하지만 HTTP/1.1버전에서 keepalive라는 기능이 추가되었다.
- keepalive는 연결을 한 번 수립하면 데이터 교환을 마칠 때까지 유지하고 데이터 교환을 모두 끝내면 연결을 끊는 구조다
    - 요청도 순서대로 처리하는 특징이 있다.
    - 요청을 순서대로 처리하면 이전 요청 처리 시간이 길어지면 다음 요청에 대한 처리가 늦어진다.

- 그래서 나온 HTTP/2 버전은 요청을 보낸 순서대로 응답을 반환하지 않아도 돼 콘텐츠를 빠르게 표시할 수 있다.

# 30. DNS 서버의 구조 (이름 해석)

- 응용 계층은 이름 해석을 통해 도메인 이름을 IP 주소로 변환하는 역할을 하는 DNS가 있다.

## 1. 도메인 이름이란?

- 컴퓨터(서버)에는 IP 주소가 있어서 인터넷을 통해 웹 서버에 접속하여 웹사이트를 볼 수 있다.
- 웹 브라우저의 주소 창에 URL을 직접 입력하면 웹 사이트가 보인다.
- 컴퓨터에 접속하려면 IP 주소를 입력해야 하는데 여기서는 [www.gilbut.co.kr](http://www.gilbut.co.kr) 을 입력했다.
- DNS는 URL을 IP 주소로 변환하는 서비스(시스템)이다.
- IP 주소가 아닌 [www.gilbut.co.kr](http://www.gilbut.co.kr) 과 같은 주소를 사용하여 접속하도록 돕는 것을 DNS의 이름 해석이라고 한다.
- [www.gilbut.co.kr](http://www.gilbut.co.kr)에 접속하면 DNS 서버가 이 웹사이트 서버의 IP 주소를 알려준다.
- [www.gilbut.co.kr](http://www.gilbut.co.kr) 과 같이 컴퓨터나 네트워크를 식별하기 위해 붙여진 이름을 도메인 이름이라고 하고 www 는 호스트 이름(서버 이름)이라고 한다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/e8a12544-0fdc-48b2-8821-f2e773443ef4/Untitled.png)

- 요청한 첫 번째 DNS 서버가 도메인의 IP주소를 모르는 경우도 있는데 그러면 DNS 서버2에 요청을 하게 된다.
- DNS 서버는 여러 대 있고 전 세계 흩어져 모두 계층적으로 연결되어있다.

# 31. 메일 서버의 구조 (SMTP와 POP3)

## 1. 메일의 송수신 구조

- 메일을 송수신하려면 클라이언트 측의 메일 프로그램과 서버 측의 메일 서버 프로그램 간에 통신을 해야한다. 그때 사용되는 프로토콜에는 두 가지 종류가 있다.
- SMPT : 메일을 보내는데 사용되는 프로토콜, 포토 번호는 25번 사용
- POP3 : 메일을 받는데 사용되는 프로토콜, 포토 번호는 110번 사용

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/f324b0db-cfa7-4fdf-b926-a3f0aa0fc8ca/Untitled.png)

- SMTP를 사용하여 컴퓨터 1에서 메일 서버 1로 메일을 보낸다.
- SMTP를 사용하여 메일 서버 1에서 메일 서버 2로 메일을 보낸다.
- POP3를 사용하여 메일 서버 2에서 컴퓨터 2로 메일 데이터를 보낸다.

- 메일 서비스를 제공하는 포털 사이트나 회사의 메일 서버에 메일을 보내는데 그 서버가 여기에서는 메일 서버 1에 해당한다.
- 컴퓨터1에서 사용하는 메일 프로그램에 메일 서비스를 제공하는 메일 서버의 호스트 이름(서버 이름)을 설정하면 메일 서버1로 메일을 보낼 수 있다.

## SMTP에 의한 메일 송신과 메일 전송

- 컴퓨터 1과 메일 서버 1간의 통신을 더 자세하게 살펴보자

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/ebf9d609-0769-419c-a655-2bc55e8203b8/Untitled.png)

- 컴퓨터 1의 메일 프로그램은 SMTP를 사용하여 메일서버 1로 메일을 보낸다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/59ab945d-ac4c-4331-9060-56f2276d21ba/Untitled.png)

- 이제 컴퓨터 1에서 메일서버 1로 메일을 보냈다.
- 다음은 SMTP를 사용하여 메일서버 1에서 메일서버 2로 메일을 전송한다.

## 3. POP3에 의한 메일 수신

- SMTP로 메일 서버 1이 메일 서버 2로 메일을 전송할 수 있었다.
- 메일 서버에는 메일 박스라고 하는 메일을 보관해주는 기능이 있다.
- 메일 서버2는 POP3를 사용하여 메일 서버 2의 메일 박스에서 메일을 가져와서 컴퓨터 2로 전송한다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/ff8aae3e-9c85-403c-9062-e148c2973362/Untitled.png)

- 메일 서버 2에 컴퓨터 1의 메일이 도착하면 컴퓨터 2는 메일 서버 2의 메일 박스에 있는 메일을 받아 가야 하지만 메일을 수신할 때는 사용자 이름과 비밀번호를 이용한 사용자 인증이 필요하니까 주의해야한다.
- POP3 프로토콜로 110번 포트를 사용한다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/ccee4141-ca57-49be-9629-57442a73b9ab/a93e7a44-a221-4eda-8d0f-455b8225d605/Untitled.png)

1. 세션을 시작한다.
2. 컴퓨터 2에서 받는 사람의 사용자 이름을 통지하고 메일 서버2에서 ‘OK’라는 확인 응답을 반환한다.
3. 컴퓨터2에서 수신자의 비밀번호를 통지하고 메일서버 2에 ‘비밀번호 확인’이라는 확인 응답을 반환한다.
4. 컴퓨터 2에서 자신의 메일이 있는지 확인하고 메일 서버 2는 ‘있음’이라는 확인 응답을 반환한다.
5. 컴퓨터 2에서 메일 박스에 보관된 이메일을 전송받는다.
6. 세션을 종료한다.